<div class="mt-2 pt-2 border-t border-base-200">
  <form
    class="space-y-2"
    hx-post="{% url 'lab:note_create' %}"
    hx-target="closest .notes-list"
    hx-swap="outerHTML"
    @submit="$event.stopPropagation()"
    x-data="{ isPrivate: false }"
  >
    {% csrf_token %}
    <input type="hidden" name="content_type" value="{{ content_type }}" />
    <input type="hidden" name="object_id" value="{{ object.id }}" />
    
    <div class="flex gap-2 items-stretch h-[auto]">
      <textarea
          name="content"
          class="textarea textarea-bordered textarea-xs flex-1 leading-normal min-h-[60px] py-2"
          placeholder="Add a note..."
          required
          rows="3"
      ></textarea>
      
      <div class="flex flex-col justify-between items-end gap-1 shrink-0 py-0.5">
          <div class="tooltip tooltip-left flex items-center gap-1.5" data-tip="Private Note">
              <label class="cursor-pointer label p-0 gap-1.5 items-center">
                  <i class="fa-solid text-[10px] transition-colors duration-200" 
                     :class="isPrivate ? 'fa-lock text-primary' : 'fa-lock-open opacity-40'"></i>
                  <input type="checkbox" 
                         name="private" 
                         class="toggle toggle-xs toggle-primary" 
                         x-model="isPrivate" />
              </label>
          </div>
          
          <button
              type="submit"
              @click="$event.stopPropagation()"
              class="btn btn-xs btn-primary h-[28px] min-h-0 px-3 w-full"
          >
              Add Note
          </button>
      </div>
    </div>
  </form>
</div>
