{% load lab_tags %}

{% if individuals %}
    {% for individual in individuals %}
    <div class="flex items-center justify-between px-3 py-2 rounded-lg hover:bg-base-200 transition-colors">
        <div class="flex items-center gap-3">
            <div>
                <span class="font-mono text-sm font-medium text-primary">{{ individual.primary_id }}</span>
                {% if individual.secondary_id %}
                <span class="text-xs text-base-content/50 ml-2 font-mono">{{ individual.secondary_id }}</span>
                {% endif %}
            </div>
            {% if individual.status %}
            <span class="badge badge-xs gap-1 font-normal">
                {% if individual.status.icon %}
                    <i class="fa-solid {{ individual.status.icon }}" style="color: {{ individual.status.color }};"></i>
                {% else %}
                    <span class="size-1.5 rounded-full" style="background-color: {{ individual.status.color }};"></span>
                {% endif %}
                {{ individual.status.name }}
            </span>
            {% endif %}
        </div>
        {% if individual.pk in already_in_project %}
        <span class="badge badge-sm badge-ghost text-base-content/40 gap-1">
            <i class="fa-solid fa-check text-xs"></i> Already added
        </span>
        {% else %}
        <button class="btn btn-primary btn-xs gap-1 font-normal"
                hx-post="{% url 'lab:project_individual_add' project.pk individual.pk %}"
                hx-target="#project-individuals-panel"
                hx-swap="outerHTML">
            <i class="fa-solid fa-plus text-[10px]"></i> Add
        </button>
        {% endif %}
    </div>
    {% endfor %}
{% elif query %}
    <p class="text-xs text-base-content/40 italic text-center py-2">No individuals found for "{{ query }}"</p>
{% else %}
    <p class="text-xs text-base-content/40 italic text-center py-2">Start typing to searchâ€¦</p>
{% endif %}
