{% extends "base.html" %}

{% block title %}Profile - RareIndex{% endblock %}

{% block content %}
<div class="p-8 max-w-6xl mx-auto">
    <div class="flex justify-between items-center mb-8">
        <div>
            <h1 class="text-3xl font-bold">Profile Settings</h1>
            <p class="text-base-content/60">Manage your account preferences and application theme.</p>
        </div>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        <!-- User Info -->
        <div class="md:col-span-1 space-y-6">
            <div class="card bg-base-200 shadow-xl">
                <div class="card-body items-center text-center">
                    <div class="avatar placeholder mb-4">
                        <div class="bg-neutral text-neutral-content rounded-full w-24">
                            <span class="text-3xl">{{ user.username|slice:":2"|upper }}</span>
                        </div>
                    </div>
                    <h2 class="card-title">{{ user.username }}</h2>
                    <p class="text-sm opacity-60">{{ user.email }}</p>
                    <div class="card-actions mt-4">
                        <a href="{% url 'account_change_password' %}" class="btn btn-outline btn-sm">Change Password</a>
                    </div>
                </div>
            </div>
            
            <div class="card bg-base-200 shadow-xl">
                <div class="card-body">
                    <h3 class="font-bold flex items-center gap-2">
                        <i class="fas fa-bell"></i> Notifications
                    </h3>
                    <div class="form-control">
                        <label class="label cursor-pointer">
                            <span class="label-text">Email Alerts</span> 
                            <input type="checkbox" class="toggle toggle-primary" checked />
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <!-- Theme Selection -->
        <div class="md:col-span-2">
            <div class="card bg-base-200 shadow-xl">
                <div class="card-body">
                    <h2 class="card-title mb-4 flex items-center gap-2">
                        <i class="fas fa-palette text-primary"></i> 
                        Select Theme
                    </h2>
                    
                    <p class="mb-6 opacity-60">Pick a theme that suits your working environment. The selected theme will be synced across all your devices.</p>

                    <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4">
                        {% for theme_name in themes %}
                        <div 
                            class="group outline-base-content overflow-hidden rounded-lg outline-2 outline-offset-2 {% if user_theme == theme_name %}outline{% endif %}"
                            data-theme="{{ theme_name }}"
                            @click="theme = '{{ theme_name }}'; htmx.ajax('POST', '{% url 'lab:update_theme' %}', {values: {theme: '{{ theme_name }}'}, swap: 'none'})"
                        >
                            <div class="grid grid-cols-5 grid-rows-3 bg-base-100 w-full h-20 cursor-pointer">
                                <div class="col-span-1 row-span-3 bg-base-200"></div>
                                <div class="col-start-2 col-span-4 row-span-1 flex items-center px-2 bg-base-100 italic">
                                    <div class="text-[10px] font-bold text-base-content">{{ theme_name }}</div>
                                </div>
                                <div class="col-start-2 col-span-4 row-span-2 flex flex-wrap gap-1 p-2 bg-base-100">
                                    <div class="w-2 h-2 rounded bg-primary"></div>
                                    <div class="w-2 h-2 rounded bg-secondary"></div>
                                    <div class="w-2 h-2 rounded bg-accent"></div>
                                    <div class="w-2 h-2 rounded bg-neutral"></div>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
