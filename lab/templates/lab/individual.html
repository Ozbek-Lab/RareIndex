{% partialdef card %}
  <div class="card-base" data-item-id="{{ item.id }}">
    <div class="card-header">
      <div class="card-title-section">
        <h3 class="card-title">{{ item.individual_id }}</h3>
        <p class="card-subtitle">{{ item.full_name }}</p>
        {% if item.icd11_code %}
          <p class="card-meta">ICD11: {{ item.icd11_code }}</p>
        {% endif %}
        <span class="card-info-row">
          <i class="fa-solid fa-building-columns card-info-icon"></i>
          {{ item.institution }}
        </span>
      </div>
      <div class="card-badge-section">
        {% with float="float-right" color=item.status.color text=item.status.name %}
          {% include 'lab/partials/badge.html' %}
        {% endwith %}
        <i class="fa-solid fa-stethoscope card-icon"></i>
      </div>
    </div>
    <div class="card-actions">
      <div x-data="{ open: false }" class="relative">
        <button @click="open = ! open" type="button" class="card-action-button">
          <span> <i class="fa-solid fa-comment"></i> Notes </span>
          <i class="fa-solid fa-chevron-down"></i>
        </button>
        <div x-show="open" class="card-dropdown">
          <div class="card-dropdown-content">Test</div>
        </div>
      </div>
    </div>
  </div>
{% endpartialdef card %}

{% partialdef timeline %}
  <div class="bg-white dark:bg-gray-800 shadow rounded-lg p-4">
    <p class="text-sm text-gray-900 dark:text-gray-100">
      Found <span class="font-bold">{{ term_count }}</span> terms for
      <span class="font-bold">{{ individual_count }} individuals</span> .
    </p>
    <div id="plotly-div" style="width: 100%; height: 800px;" class="mt-4"></div>
  </div>
  {# prettier-ignore-start #}
  <script>
    var plotData = {{ plot_json|safe }};
    var plotlyDiv = document.getElementById('plotly-div');
    if (plotlyDiv) { Plotly.newPlot(plotlyDiv, plotData.data, plotData.layout); }
  </script>
{# prettier-ignore-end #}
{% endpartialdef %}
